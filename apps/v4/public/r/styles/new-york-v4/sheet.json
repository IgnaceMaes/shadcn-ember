{
  "$schema": "https://shadcn-ember.com/schema/registry-item.json",
  "name": "sheet",
  "type": "registry:ui",
  "dependencies": [
    "@ember/modifier",
    "@glimmer/component",
    "@glimmer/tracking",
    "ember-modifier",
    "ember-provide-consume-context"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/ui/sheet.gts",
      "content": "import { hash } from '@ember/helper';\nimport { on } from '@ember/modifier';\nimport Component from '@glimmer/component';\nimport { tracked } from '@glimmer/tracking';\nimport { modifier } from 'ember-modifier';\nimport { provide, consume } from 'ember-provide-consume-context';\n\nimport { cn } from '@/lib/utils';\n\nimport type { TOC } from '@ember/component/template-only';\n\nimport X from '~icons/lucide/x';\n\ntype Side = 'top' | 'bottom' | 'left' | 'right';\n\nconst SheetContext = 'sheet-context' as const;\n\ninterface SheetContextValue {\n  open: boolean;\n  isRendered: boolean;\n  setOpen: (open: boolean) => void;\n  finishClose: () => void;\n}\n\ninterface ContextRegistry {\n  [SheetContext]: SheetContextValue;\n}\n\nfunction sheetVariants(side: Side = 'right', className?: string): string {\n  const baseClasses =\n    'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500';\n\n  const sideClasses: Record<Side, string> = {\n    right:\n      'data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm',\n    left: 'data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm',\n    top: 'data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b',\n    bottom:\n      'data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t',\n  };\n\n  return cn(baseClasses, sideClasses[side], className);\n}\n\ninterface SheetSignature {\n  Args: {\n    open?: boolean;\n    defaultOpen?: boolean;\n    onOpenChange?: (open: boolean) => void;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nclass Sheet extends Component<SheetSignature> {\n  @tracked isOpen = false;\n  @tracked isOpenOrClosing = false;\n\n  get open() {\n    return this.args.open ?? this.isOpen;\n  }\n\n  get isRendered() {\n    return this.open || this.isOpenOrClosing;\n  }\n\n  setOpen = (open: boolean) => {\n    if (open) {\n      this.isOpenOrClosing = true;\n      this.isOpen = true;\n    } else {\n      this.isOpen = false;\n    }\n    this.args.onOpenChange?.(open);\n  };\n\n  finishClose = () => {\n    if (!this.open) {\n      this.isOpenOrClosing = false;\n    }\n  };\n\n  @provide(SheetContext)\n  get context(): SheetContextValue {\n    return {\n      open: this.open,\n      isRendered: this.isRendered,\n      setOpen: this.setOpen,\n      finishClose: this.finishClose,\n    };\n  }\n\n  <template>\n    <div data-slot=\"sheet\">\n      {{yield}}\n    </div>\n  </template>\n}\n\ninterface SheetTriggerSignature {\n  Element: HTMLButtonElement;\n  Args: {\n    class?: string;\n    asChild?: boolean;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nclass SheetTrigger extends Component<SheetTriggerSignature> {\n  @consume(SheetContext) context!: ContextRegistry[typeof SheetContext];\n\n  handleClick = () => {\n    this.context.setOpen(true);\n  };\n\n  <template>\n    {{#if @asChild}}\n      <span\n        class=\"contents\"\n        data-slot=\"sheet-trigger\"\n        role=\"button\"\n        tabindex=\"0\"\n        {{on \"click\" this.handleClick}}\n        {{on \"keydown\" this.handleClick}}\n        ...attributes\n      >\n        {{yield (hash)}}\n      </span>\n    {{else}}\n      <button\n        class={{cn @class}}\n        data-slot=\"sheet-trigger\"\n        type=\"button\"\n        {{on \"click\" this.handleClick}}\n        ...attributes\n      >\n        {{yield}}\n      </button>\n    {{/if}}\n  </template>\n}\n\ninterface SheetCloseSignature {\n  Element: HTMLButtonElement;\n  Args: {\n    class?: string;\n    asChild?: boolean;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nclass SheetClose extends Component<SheetCloseSignature> {\n  @consume(SheetContext) context!: ContextRegistry[typeof SheetContext];\n\n  handleClick = () => {\n    this.context.setOpen(false);\n  };\n\n  <template>\n    {{#if @asChild}}\n      <span\n        class=\"contents\"\n        data-slot=\"sheet-close\"\n        role=\"button\"\n        tabindex=\"0\"\n        {{on \"click\" this.handleClick}}\n        {{on \"keydown\" this.handleClick}}\n        ...attributes\n      >\n        {{yield (hash)}}\n      </span>\n    {{else}}\n      <button\n        class={{cn @class}}\n        data-slot=\"sheet-close\"\n        type=\"button\"\n        {{on \"click\" this.handleClick}}\n        ...attributes\n      >\n        {{yield}}\n      </button>\n    {{/if}}\n  </template>\n}\n\ninterface SheetPortalSignature {\n  Blocks: {\n    default: [];\n  };\n}\n\nconst SheetPortal: TOC<SheetPortalSignature> = <template>\n  <div data-slot=\"sheet-portal\">\n    {{yield}}\n  </div>\n</template>;\n\ninterface SheetOverlaySignature {\n  Element: HTMLDivElement;\n  Args: {\n    class?: string;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nclass SheetOverlay extends Component<SheetOverlaySignature> {\n  @consume(SheetContext) context!: ContextRegistry[typeof SheetContext];\n\n  handleClick = () => {\n    this.context.setOpen(false);\n  };\n\n  handleAnimationEnd = (event: AnimationEvent) => {\n    if (event.target === event.currentTarget && !this.context.open) {\n      this.context.finishClose();\n    }\n  };\n\n  <template>\n    {{! template-lint-disable no-invalid-interactive }}\n    <div\n      class={{cn\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\"\n        @class\n      }}\n      data-slot=\"sheet-overlay\"\n      data-state={{if this.context.open \"open\" \"closed\"}}\n      {{on \"animationend\" this.handleAnimationEnd}}\n      {{on \"click\" this.handleClick}}\n      ...attributes\n    ></div>\n  </template>\n}\n\ninterface SheetContentSignature {\n  Element: HTMLDivElement;\n  Args: {\n    class?: string;\n    side?: Side;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nclass SheetContent extends Component<SheetContentSignature> {\n  @consume(SheetContext) context!: ContextRegistry[typeof SheetContext];\n\n  get destinationElement() {\n    return document.body;\n  }\n\n  get classes() {\n    return sheetVariants(this.args.side ?? 'right', this.args.class);\n  }\n\n  scrollLock = modifier(\n    (_element, _positional, { enabled = true }: { enabled?: boolean } = {}) => {\n      if (!enabled) {\n        return;\n      }\n\n      document.body.classList.add('overflow-hidden');\n\n      return () => {\n        document.body.classList.remove('overflow-hidden');\n      };\n    }\n  );\n\n  handleAnimationEnd = (event: AnimationEvent) => {\n    if (event.target === event.currentTarget && !this.context.open) {\n      this.context.finishClose();\n    }\n  };\n\n  handleCloseClick = () => {\n    this.context.setOpen(false);\n  };\n\n  <template>\n    {{#if this.context.isRendered}}\n      {{#in-element this.destinationElement insertBefore=null}}\n        <SheetOverlay />\n        <div\n          class={{this.classes}}\n          data-slot=\"sheet-content\"\n          data-state={{if this.context.open \"open\" \"closed\"}}\n          role=\"dialog\"\n          {{on \"animationend\" this.handleAnimationEnd}}\n          {{this.scrollLock enabled=this.context.open}}\n          ...attributes\n        >\n          {{yield}}\n          <button\n            class=\"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none\"\n            type=\"button\"\n            {{on \"click\" this.handleCloseClick}}\n          >\n            <X class=\"size-4\" />\n            <span class=\"sr-only\">Close</span>\n          </button>\n        </div>\n      {{/in-element}}\n    {{/if}}\n  </template>\n}\n\ninterface SheetHeaderSignature {\n  Element: HTMLDivElement;\n  Args: {\n    class?: string;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nconst SheetHeader: TOC<SheetHeaderSignature> = <template>\n  <div\n    class={{cn \"flex flex-col gap-1.5 p-4\" @class}}\n    data-slot=\"sheet-header\"\n    ...attributes\n  >\n    {{yield}}\n  </div>\n</template>;\n\ninterface SheetFooterSignature {\n  Element: HTMLDivElement;\n  Args: {\n    class?: string;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nconst SheetFooter: TOC<SheetFooterSignature> = <template>\n  <div\n    class={{cn \"mt-auto flex flex-col gap-2 p-4\" @class}}\n    data-slot=\"sheet-footer\"\n    ...attributes\n  >\n    {{yield}}\n  </div>\n</template>;\n\ninterface SheetTitleSignature {\n  Element: HTMLHeadingElement;\n  Args: {\n    class?: string;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nconst SheetTitle: TOC<SheetTitleSignature> = <template>\n  <h2\n    class={{cn \"text-foreground font-semibold\" @class}}\n    data-slot=\"sheet-title\"\n    ...attributes\n  >\n    {{yield}}\n  </h2>\n</template>;\n\ninterface SheetDescriptionSignature {\n  Element: HTMLParagraphElement;\n  Args: {\n    class?: string;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nconst SheetDescription: TOC<SheetDescriptionSignature> = <template>\n  <p\n    class={{cn \"text-muted-foreground text-sm\" @class}}\n    data-slot=\"sheet-description\"\n    ...attributes\n  >\n    {{yield}}\n  </p>\n</template>;\n\nexport {\n  Sheet,\n  SheetTrigger,\n  SheetClose,\n  SheetPortal,\n  SheetOverlay,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n};\n",
      "type": "registry:ui"
    }
  ]
}
