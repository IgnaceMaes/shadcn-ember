{
  "$schema": "https://shadcn-ember.com/schema/registry-item.json",
  "name": "dialog",
  "type": "registry:ui",
  "files": [
    {
      "path": "registry/new-york-v4/ui/dialog.gts",
      "content": "import { on } from '@ember/modifier';\nimport Component from '@glimmer/component';\nimport { tracked } from '@glimmer/tracking';\nimport { modifier } from 'ember-modifier';\nimport { provide, consume } from 'ember-provide-consume-context';\n\nimport { cn } from '@/lib/utils';\n\nimport type { TOC } from '@ember/component/template-only';\n\nimport XIcon from '~icons/lucide/x';\n\nconst DialogContext = 'dialog-context' as const;\n\ninterface DialogContextValue {\n  open: boolean;\n  isRendered: boolean;\n  setOpen: (open: boolean) => void;\n  finishClose: () => void;\n}\n\ninterface ContextRegistry {\n  [DialogContext]: DialogContextValue;\n}\n\ninterface DialogSignature {\n  Args: {\n    open?: boolean;\n    onOpenChange?: (open: boolean) => void;\n    class?: string;\n  };\n  Blocks: {\n    default: [];\n  };\n  Element: HTMLDivElement;\n}\n\nclass Dialog extends Component<DialogSignature> {\n  @tracked isOpen = false;\n  @tracked isOpenOrClosing = false;\n\n  get open() {\n    return this.args.open ?? this.isOpen;\n  }\n\n  get isRendered() {\n    return this.open || this.isOpenOrClosing;\n  }\n\n  setOpen = (open: boolean) => {\n    if (open) {\n      this.isOpenOrClosing = true;\n      this.isOpen = true;\n    } else {\n      this.isOpen = false;\n    }\n    this.args.onOpenChange?.(open);\n  };\n\n  finishClose = () => {\n    if (!this.open) {\n      this.isOpenOrClosing = false;\n    }\n  };\n\n  @provide(DialogContext)\n  get context(): DialogContextValue {\n    return {\n      open: this.open,\n      isRendered: this.isRendered,\n      setOpen: this.setOpen,\n      finishClose: this.finishClose,\n    };\n  }\n\n  <template>\n    <div class={{cn @class}} data-slot=\"dialog\" ...attributes>\n      {{yield}}\n    </div>\n  </template>\n}\n\ninterface DialogTriggerSignature {\n  Element: HTMLButtonElement;\n  Args: {\n    class?: string;\n    asChild?: boolean;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nclass DialogTrigger extends Component<DialogTriggerSignature> {\n  @consume(DialogContext) context!: ContextRegistry[typeof DialogContext];\n\n  handleClick = (event: MouseEvent) => {\n    event.preventDefault();\n    this.context.setOpen(true);\n  };\n\n  <template>\n    {{#if @asChild}}\n      {{yield}}\n    {{else}}\n      <button\n        class={{cn @class}}\n        data-slot=\"dialog-trigger\"\n        type=\"button\"\n        {{on \"click\" this.handleClick}}\n        ...attributes\n      >\n        {{yield}}\n      </button>\n    {{/if}}\n  </template>\n}\n\ninterface DialogPortalSignature {\n  Blocks: {\n    default: [];\n  };\n}\n\nconst DialogPortal: TOC<DialogPortalSignature> = <template>\n  <div data-slot=\"dialog-portal\">\n    {{yield}}\n  </div>\n</template>;\n\ninterface DialogOverlaySignature {\n  Element: HTMLDivElement;\n  Args: {\n    class?: string;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nclass DialogOverlay extends Component<DialogOverlaySignature> {\n  @consume(DialogContext) context!: ContextRegistry[typeof DialogContext];\n\n  handleClick = () => {\n    this.context.setOpen(false);\n  };\n\n  handleAnimationEnd = (event: AnimationEvent) => {\n    if (event.target === event.currentTarget && !this.context.open) {\n      this.context.finishClose();\n    }\n  };\n\n  <template>\n    <div\n      class={{cn\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\"\n        @class\n      }}\n      data-slot=\"dialog-overlay\"\n      data-state={{if this.context.open \"open\" \"closed\"}}\n      role=\"button\"\n      tabindex=\"0\"\n      {{on \"animationend\" this.handleAnimationEnd}}\n      {{on \"click\" this.handleClick}}\n      ...attributes\n    ></div>\n  </template>\n}\n\ninterface DialogCloseSignature {\n  Element: HTMLButtonElement;\n  Args: {\n    class?: string;\n    asChild?: boolean;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nclass DialogClose extends Component<DialogCloseSignature> {\n  @consume(DialogContext) context!: ContextRegistry[typeof DialogContext];\n\n  handleClick = () => {\n    this.context.setOpen(false);\n  };\n\n  <template>\n    {{#if @asChild}}\n      <span\n        class=\"contents\"\n        data-slot=\"dialog-close\"\n        role=\"button\"\n        tabindex=\"0\"\n        {{on \"click\" this.handleClick}}\n        {{on \"keydown\" this.handleClick}}\n        ...attributes\n      >\n        {{yield}}\n      </span>\n    {{else}}\n      <button\n        class={{cn @class}}\n        data-slot=\"dialog-close\"\n        type=\"button\"\n        {{on \"click\" this.handleClick}}\n        ...attributes\n      >\n        {{yield}}\n      </button>\n    {{/if}}\n  </template>\n}\n\ninterface DialogContentSignature {\n  Element: HTMLDivElement;\n  Args: {\n    class?: string;\n    showCloseButton?: boolean;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nclass DialogContent extends Component<DialogContentSignature> {\n  @consume(DialogContext) context!: ContextRegistry[typeof DialogContext];\n\n  get destinationElement() {\n    return document.body;\n  }\n\n  get showCloseButton() {\n    return this.args.showCloseButton ?? true;\n  }\n\n  scrollLock = modifier(\n    (_element, _positional, { enabled = true }: { enabled?: boolean } = {}) => {\n      if (!enabled) {\n        return;\n      }\n\n      document.body.classList.add('overflow-hidden');\n\n      return () => {\n        document.body.classList.remove('overflow-hidden');\n      };\n    }\n  );\n\n  handleOverlayClick = (event: MouseEvent) => {\n    event.stopPropagation();\n  };\n\n  handleCloseClick = () => {\n    this.context.setOpen(false);\n  };\n\n  handleKeyDown = (event: KeyboardEvent) => {\n    if (event.key === 'Escape') {\n      this.context.setOpen(false);\n    }\n  };\n\n  handleAnimationEnd = (event: AnimationEvent) => {\n    if (event.target === event.currentTarget && !this.context.open) {\n      this.context.finishClose();\n    }\n  };\n\n  <template>\n    {{#if this.context.isRendered}}\n      {{#in-element this.destinationElement insertBefore=null}}\n        <DialogOverlay />\n        <div\n          aria-modal=\"true\"\n          class={{cn\n            \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg\"\n            @class\n          }}\n          data-slot=\"dialog-content\"\n          data-state={{if this.context.open \"open\" \"closed\"}}\n          role=\"dialog\"\n          tabindex=\"-1\"\n          {{on \"animationend\" this.handleAnimationEnd}}\n          {{on \"click\" this.handleOverlayClick}}\n          {{on \"keydown\" this.handleKeyDown}}\n          {{this.scrollLock enabled=this.context.open}}\n          ...attributes\n        >\n          {{yield}}\n          {{#if this.showCloseButton}}\n            <DialogClose\n              @class=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n            >\n              <XIcon />\n              <span class=\"sr-only\">Close</span>\n            </DialogClose>\n          {{/if}}\n        </div>\n      {{/in-element}}\n    {{/if}}\n  </template>\n}\n\ninterface DialogHeaderSignature {\n  Element: HTMLDivElement;\n  Args: {\n    class?: string;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nconst DialogHeader: TOC<DialogHeaderSignature> = <template>\n  <div\n    class={{cn \"flex flex-col gap-2 text-center sm:text-left\" @class}}\n    data-slot=\"dialog-header\"\n    ...attributes\n  >\n    {{yield}}\n  </div>\n</template>;\n\ninterface DialogFooterSignature {\n  Element: HTMLDivElement;\n  Args: {\n    class?: string;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nconst DialogFooter: TOC<DialogFooterSignature> = <template>\n  <div\n    class={{cn \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\" @class}}\n    data-slot=\"dialog-footer\"\n    ...attributes\n  >\n    {{yield}}\n  </div>\n</template>;\n\ninterface DialogTitleSignature {\n  Element: HTMLHeadingElement;\n  Args: {\n    class?: string;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nconst DialogTitle: TOC<DialogTitleSignature> = <template>\n  <h2\n    class={{cn \"text-lg leading-none font-semibold\" @class}}\n    data-slot=\"dialog-title\"\n    ...attributes\n  >\n    {{yield}}\n  </h2>\n</template>;\n\ninterface DialogDescriptionSignature {\n  Element: HTMLParagraphElement;\n  Args: {\n    class?: string;\n  };\n  Blocks: {\n    default: [];\n  };\n}\n\nconst DialogDescription: TOC<DialogDescriptionSignature> = <template>\n  <p\n    class={{cn \"text-muted-foreground text-sm\" @class}}\n    data-slot=\"dialog-description\"\n    ...attributes\n  >\n    {{yield}}\n  </p>\n</template>;\n\nexport {\n  Dialog,\n  DialogTrigger,\n  DialogPortal,\n  DialogOverlay,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n  DialogClose,\n};\n",
      "type": "registry:ui"
    }
  ]
}